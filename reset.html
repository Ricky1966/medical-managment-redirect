<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reset password HealthCare</title>
  <meta name="theme-color" content="#ff9966" />
  <script>
  (function () {
    const params = new URLSearchParams(window.location.search);
    const deepLink = 'io.supabase.flutter://reset-callback?' + params.toString();

    const a = document.getElementById('manual-link');
    a.setAttribute('href', deepLink);
    a.setAttribute('rel', 'noopener noreferrer');

    setTimeout(() => { window.location.href = deepLink; }, 1000);
  })();
</script>
</head>
<body>
  <h1>Reimpostazione password…</h1>
  <p>Verrai reindirizzato all’app per completare il reset.</p>
  <p>Se non succede, <a id="manual-link" href="#" rel="noopener noreferrer">tocca qui</a>.</p>
  <div class="loader" aria-hidden="true"></div>

  <script>
    (function () {
      const params = new URLSearchParams(window.location.search);
      const deepLink = 'io.supabase.flutter://reset-callback?' + params.toString();
      const a = document.getElementById('manual-link');
      a.setAttribute('href', deepLink);
      a.setAttribute('rel', 'noopener noreferrer');
      setTimeout(() => { window.location.replace(deepLink); }, 800);
    })();
  </script>
  <noscript><p>JavaScript è necessario per il reindirizzamento automatico. Usa il link sopra.</p></noscript>
</body>
</html>
